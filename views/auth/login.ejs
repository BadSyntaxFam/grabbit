<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Grabbit</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    
    <div class="container">
        
        <div class="form-default form-login">
            
            <div id="logo">
                <img src="images/grabbitlogo2.png" alt="">
            </div>

            <div id="status-container"></div>
            
            <h3>Sign in</h3>
            <form action="/login" method="post">

                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" class="form-control" name="username" id="username">
                </div>

                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" class="form-control" name="password" id="password"> 
                </div>

                <div id="buttons-div">
                    <button class="btn btn-primary" type="submit">Sign in</button>
                </div>

            </form>
            <div id="options">
                <span>
                    <a href="/signup">Sign up</a> |
                    <a href="/forgot">Forgot password</a>
                </span>
            </div>
        </div>

    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" ></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>

    <script>
        //Checks if url has a hash appended then displays message accordingly
        let hash = window.location.hash.replace('#', '');
        let element = document.getElementById('status-container')

        if (hash) {
            let status = { alertType: undefined, text: undefined }
            let foundStatus = true
            switch (hash) {
                case 'failed':
                    status.alertType = 'danger'
                    status.text = `Incorrect username or password`
                    break

                case 'signup-success':
                    status.alertType = 'success'
                    status.text = `Welcome to Grabbit, please log in!`
                    break

                default:
                    foundStatus = false
                    break
            }
            if (foundStatus) {
                element.innerHTML = `<div class="alert alert-${status.alertType}" role="alert">
                                        ${status.text}
                                    </div>`
            }
        }

    </script>
    
</body>
</html>